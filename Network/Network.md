# 如何在 Ubuntu 手動安裝網路

(1) 確認網路設定檔所在位置

```
alanjui@SRV01:~$ ls /etc/network/interfaces
/etc/network/interfaces
```

(2) 在設定檔，完成網路卡的添加設定。

```
alanjui@SRV01:~$ sudo code /etc/network/interfaces
[sudo] password for alanjui:
```

網路卡的添加的設定內容：
```
# NIC 1
auto eth0
iface eth0 inet static
address 192.168.99.10
netmask 255.255.255.0
network 192.168.99.0
broadcast 192.168.99.255
gateway 192.168.99.1
dns-search ccc99.tw
dns-nameservers 192.168.99.1 168.95.1.1
```

(3) 啟動網路卡
```
alanjui@SRV01:~$ sudo /etc/init.d/networking restart
[sudo] password for alanjui:
[ ok ] Restarting networking (via systemctl): networking.service.
alanjui@SRV01:~$
```

(4) 驗證網路已能正常運作

##### ifconfig

```
alanjui@SRV01:~$ ifconfig
eth0      Link encap:Ethernet  HWaddr 80:ee:73:20:ff:e1
          inet addr:192.168.99.10  Bcast:192.168.99.255  Mask:255.255.255.0
          inet6 addr: fe80::82ee:73ff:fe20:ffe1/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:138 errors:0 dropped:0 overruns:0 frame:0
          TX packets:152 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:48991 (48.9 KB)  TX bytes:18020 (18.0 KB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:283043 errors:0 dropped:0 overruns:0 frame:0
          TX packets:283043 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:23668369 (23.6 MB)  TX bytes:23668369 (23.6 MB)

alanjui@SRV01:~$
```

###### ping IP
```
alanjui@SRV01:~$ ping 192.168.99.1
PING 192.168.99.1 (192.168.99.1) 56(84) bytes of data.
64 bytes from 192.168.99.1: icmp_seq=1 ttl=64 time=5.57 ms
64 bytes from 192.168.99.1: icmp_seq=2 ttl=64 time=1.32 ms
64 bytes from 192.168.99.1: icmp_seq=3 ttl=64 time=1.32 ms
64 bytes from 192.168.99.1: icmp_seq=4 ttl=64 time=1.29 ms
^C
--- 192.168.99.1 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 2999ms
rtt min/avg/max/mdev = 1.296/2.380/5.578/1.846 ms
alanjui@SRV01:~$
```
###### ping HOST
會失敗，因為DNS尚未設定。
```
alanjui@SRV01:~$ ping www.gmail.com
ping: unknown host www.gmail.com
alanjui@SRV01:~$
```

(5) 設定DNS

```
sudo code /etc/resolv.conf
```

設定內容：
```
nameserver 192.168.99.1
nameserver 168.95.1.1
```


(6) 驗證DNS設定

```
alanjui@SRV01:~$ cat /etc/resolv.conf
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 192.168.99.1, 168.95.1.1alanjui@SRV01:~$ sudo /etc/init.d/networking restart
[ ok ] Restarting networking (via systemctl): networking.service.
alanjui@SRV01:~$ ping 192.168.99.10
PING 192.168.99.10 (192.168.99.10) 56(84) bytes of data.
64 bytes from 192.168.99.10: icmp_seq=1 ttl=64 time=0.020 ms
64 bytes from 192.168.99.10: icmp_seq=2 ttl=64 time=0.025 ms
64 bytes from 192.168.99.10: icmp_seq=3 ttl=64 time=0.024 ms
^C
--- 192.168.99.10 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1999ms
rtt min/avg/max/mdev = 0.020/0.023/0.025/0.002 ms


alanjui@SRV01:~$ ping 168.95.1.1
PING 168.95.1.1 (168.95.1.1) 56(84) bytes of data.
64 bytes from 168.95.1.1: icmp_seq=1 ttl=243 time=11.3 ms
64 bytes from 168.95.1.1: icmp_seq=2 ttl=243 time=9.98 ms
64 bytes from 168.95.1.1: icmp_seq=3 ttl=243 time=10.8 ms
^C
--- 168.95.1.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 1998ms
rtt min/avg/max/mdev = 9.987/10.723/11.345/0.560 ms


alanjui@SRV01:~$ ping www.gmail.com
PING googlemail.l.google.com (74.125.23.18) 56(84) bytes of data.
64 bytes from tg-in-f18.1e100.net (74.125.23.18): icmp_seq=1 ttl=44 time=24.9 ms
64 bytes from tg-in-f18.1e100.net (74.125.23.18): icmp_seq=2 ttl=44 time=13.4 ms
64 bytes from tg-in-f18.1e100.net (74.125.23.18): icmp_seq=3 ttl=44 time=16.5 ms
^C
--- googlemail.l.google.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 13.438/18.318/24.921/4.844 ms
alanjui@SRV01:~$

```
